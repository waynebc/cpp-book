# 引用

引用变量是一个别名，也就是说，它是某一个已存在变量的另一个名字。一旦把引用初始化为某个变量，就可以使用该引用名称或变量名称来指向变量。

## C++ 引用 vs 指针

- 不存在空引用。引用必须连接到一块合法的内存
- 一旦引用被初始化为一个对象，就不能被指向到另一个对象。指针可以在任何时候指向到另一个对象。
- 引用必须在创建的时候被初始化。指针可以在任何时候被初始化。

## C++ 把引用作为返回值

通过使用引用来代替指针，会使 C++ 程序更容易维护和阅读。

C++函数可以返回一个引用，返回方式和返回一个指针类似。

注意返回局部变量的引用时，因为局部变量生命周期已经结束，作为其别名的引用实际上引用的是无效的局部变量。

### 返回指针引用的问题

比如下面的代码，main函数中的 a 引用 getArr 函数内的局部变量，该局部变量已经无效，其所指向的 new 出的数组空间也会泄漏，无法回收：

```c++
#include <iostream>
#include <cstring>
using namespace std;

int* & getArr(int n){

    int* a = new int[10];
    return a;
}

int main() {

    int* & a = getArr(10);

    a[2] = 12;  //这里会报段错误

    cout << getArr(10)[2] << endl;
    return 0;
}
```

所以返回的引用应该是函数内的静态变量或全局变量。

